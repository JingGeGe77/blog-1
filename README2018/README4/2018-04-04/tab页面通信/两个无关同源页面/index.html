<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>A 页 面</title>
  </head>
  <body>
     <button>click<button>

      <script>
         window.addEventListener("storage",function(ev){
            if(ev.key === "message") {
                // removeItem 同样触发storage 事件，此时ev.newValue 为空
               if(!ev.newValue)
                   return;
               var message = JSON.parse(ev.newValue);
               console.log(message);
            }
         });
         function sendMessage(message) {
           console.log("exacted sendMessage");
              localStorage.setItem('message',message);
              localStorage.removeItem("message");
         };
         document.querySelector('button').onclick = function(){
              sendMessage('this is message from A');
       }
         // 发送消息给B 页面。

      </script>
  </body>
</html>
